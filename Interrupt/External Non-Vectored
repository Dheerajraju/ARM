#include <LPC21xx.H>

// Define LEDs
#define LED1 (1<<2)  // P0.2
#define LED2 (1<<3)  // P0.3

// VIC configuration macros
#define IRQ_Slot_En 0x20
#define Eint0_num 14
#define Eint1_num 15

void non_vect_isr(void) __irq
{
if((VICIRQStatus >>14) &1)
{
    EXTINT = 0x1;       // Clear EINT0 interrupt flag
    IOSET0 = LED1;
    IOCLR0 = LED1;
	VICVectAddr = 0; 

}
// EXTERNAL INTERRUPT1 ISR
if((VICIRQStatus >>15)&1)
{
    EXTINT = 0x2;       // Clear EINT1 interrupt flag
    IOSET0 = LED2;
    IOCLR0 = LED2;
    VICVectAddr = 0;    // Dummy write to signal end of ISR
}
  }
unsigned int count = 0;

int main()
{
    // Configure P0.16 as EINT0 and P0.14 as EINT1
    PINSEL1 = 0x1;   // P0.16 -> EINT0
    PINSEL0 = 0x20000000;  // P0.14 -> EINT1

    // Set LED pins as output
    IODIR0 = LED1 | LED2;
	VICIntSelect = 0;
	VICDefVectAddr = (int)non_vect_isr;


    // Set interrupt mode for external interrupt
    EXTMODE = 0x03;     // Both EI
    EXTPOLAR = 0x00;    // Fa
    // Enable external interrupts in VIC
    VICIntEnable = (1 << Eint0_num) | (1 << Eint1_num);

    while (1)
    {
        count++;
    }
}
