// Print 0 to 9 on seven segment display using LPC2129
#include<LPC21XX.H>

#define SEG_D 0xff<<0   // Segment pins connected to lower 8 bits of PORT0
#define SEG_1 1<<8      // Control pin for enabling the seven-segment display

// Lookup table for numbers 0 to 9 (segment codes)
unsigned char SEG_LUT[10] = {0x0C, 0xf9, 0x04, 0xd0, 0x99, 0x92, 0x82, 0xf8, 0x80, 0x90};

void delay_ms(int ms) // Timer delay function
{
	T0PR = 15000-1;   // Set prescaler for 1ms delay (assuming PCLK 15 MHz)
	T0TCR = 0x01;     // Timer enable and reset counter
	while(T0TCR < ms) // Wait loop (incorrect logic but keeping original as requested)
	T0TCR = 0x03;     // Reset and enable timer again
	T0TCR = 0x01;     // Enable timer
}

int main()
{
	char digit = 0;              // Starting number from 0
	IODIR0 = SEG_D | SEG_1;      // Configure segment and control pin as output

	while(digit < 10)            // Loop to display digits 0 to 9
	{
		IOCLR0 = SEG_D;         // Clear previous segment data
		IOSET0 = SEG_LUT[digit++]; // Output segment code for current digit
		IOCLR0 = SEG_1;         // Activate display (assuming active LOW enable)
		delay_ms(500);          // 500ms delay so digit is visible
		IOSET0 = SEG_1;         // Turn off the display
	}
}
